<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dados da IGFI</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body data-page="dashboard">
    <header class="app-header">
      <div class="branding">
        <a
          class="logo-link"
          href="index.html"
          aria-label="Início · Dados da IGFI"
        >
          <img
            class="logo-image"
            src="https://simp6.selti-delivery.ru/images3/Fulltv-335513d28dcc2f0d6.png"
            alt="Logo da IGFI"
          />
        </a>
        <div class="header-content">
          <h1 id="app-title">Dados da IGFI</h1>
          <p id="last-updated">Carregando dados...</p>
        </div>
        <div class="language-switcher" id="language-switcher" hidden>
          <button
            type="button"
            class="language-toggle"
            id="language-toggle"
            aria-haspopup="true"
            aria-expanded="false"
            aria-label="Selecionar idioma"
          >
            <span id="language-toggle-label">PT</span>
          </button>
          <ul class="language-menu" id="language-menu" role="menu" hidden></ul>
        </div>
        <div class="user-profile" id="user-profile" hidden>
          <button
            type="button"
            class="user-profile-toggle"
            id="user-menu-toggle"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <span class="user-profile-label" id="user-profile-label"
              >Perfil</span
            >
          </button>
          <div class="user-profile-menu" id="user-menu" role="menu" hidden>
            <p class="user-profile-title" id="user-profile-title">Perfil atual</p>
            <p class="user-profile-role" id="user-menu-role">—</p>
            <p class="user-profile-description" id="user-menu-detail"></p>
            <button
              type="button"
              class="user-profile-action"
              id="manage-services"
              role="menuitem"
            >
              Gerenciar serviços
            </button>
            <button
              type="button"
              class="user-profile-action"
              id="switch-user"
              role="menuitem"
            >
              Trocar de usuário
            </button>
          </div>
        </div>
      </div>
      <div class="search-wrapper">
        <label for="search" id="search-label">Pesquisar Irmão</label>
        <div class="search-input">
          <input
            type="search"
            id="search"
            placeholder="Digite o nome"
            autocomplete="off"
            aria-autocomplete="list"
          />
          <ul id="suggestions" role="listbox" aria-label="Sugestões"></ul>
        </div>
      </div>
    </header>

    <main>
      <section class="cards" aria-live="polite">
        <article class="card" data-category="total" role="button" tabindex="0">
          <div class="card-header">
            <h2>Total de Irmãos</h2>
            <span class="value" id="total-count">0</span>
          </div>
          <p class="card-hint">Clique para acessar as informações correspondentes.</p>
        </article>
        <article class="card" data-category="children" role="button" tabindex="0">
          <div class="card-header">
            <h2>Crianças (0-10)</h2>
            <span class="value" id="children-count">0</span>
          </div>
          <p class="card-hint">Clique para acessar as informações correspondentes.</p>
        </article>
        <article class="card" data-category="teens" role="button" tabindex="0">
          <div class="card-header">
            <h2>Adolescentes (11-17)</h2>
            <span class="value" id="teens-count">0</span>
          </div>
          <p class="card-hint">Clique para acessar as informações correspondentes.</p>
        </article>
        <article class="card" data-category="captains" role="button" tabindex="0">
          <div class="card-header">
            <h2>Capitães de Tropa (18-29)</h2>
            <span class="value" id="captains-count">0</span>
          </div>
          <p class="card-hint">Clique para acessar as informações correspondentes.</p>
        </article>
        <article class="card" data-category="braves" role="button" tabindex="0">
          <div class="card-header">
            <h2>Valentes de Davi (30-49)</h2>
            <span class="value" id="braves-count">0</span>
          </div>
          <p class="card-hint">Clique para acessar as informações correspondentes.</p>
        </article>
        <article class="card" data-category="stewards" role="button" tabindex="0">
          <div class="card-header">
            <h2>Intendentes (50+)</h2>
            <span class="value" id="stewards-count">0</span>
          </div>
          <p class="card-hint">Clique para acessar as informações correspondentes.</p>
        </article>
        <article class="card" data-category="parents" role="button" tabindex="0">
          <div class="card-header">
            <h2>Pais</h2>
            <span class="value" id="parents-count">0</span>
          </div>
          <p class="card-hint">Clique para acessar as informações correspondentes.</p>
        </article>
        <article
          class="card card--care-network"
          data-category="care-network"
          role="button"
          tabindex="0"
        >
          <div class="card-header">
            <img
              id="care-network-image"
              class="card-care-image"
              src="https://simp6.selti-delivery.ru/images3/image930ba15ef9054629.png"
              alt="Rede de Cuidado"
              loading="lazy"
            />
            <h2>Rede de Cuidado</h2>
            <span class="value" id="care-network-count" aria-hidden="true">0</span>
          </div>
          <p class="card-hint">Clique para acessar as informações correspondentes.</p>
        </article>
        <article class="card card--services" data-category="services" role="button" tabindex="0">
          <div class="card-header">
            <h2>Serviços</h2>
            <span class="value" id="services-count" aria-hidden="true">0</span>
          </div>
          <p class="card-hint">Clique para acessar as informações correspondentes.</p>
        </article>
      </section>

      <section class="overview" aria-labelledby="overview-title">
        <div class="section-header">
          <h2 id="overview-title">Distribuição geral de idades</h2>
          <p id="overview-description">
            Visualize a idade de todos os irmãos cadastrados.
          </p>
        </div>
        <div class="chart-container">
          <canvas id="overall-age-chart" aria-label="Gráfico geral de idades" role="img"></canvas>
          <p class="empty-message" id="overall-empty">Nenhum dado de idade disponível.</p>
        </div>
      </section>

      <section
        class="birthdays"
        id="birthday-section"
        aria-labelledby="birthday-title"
        hidden
      >
        <div class="section-header">
          <h2 id="birthday-title">Aniversariantes de hoje</h2>
          <p class="birthdays-description">
            Celebre com os irmãos que comemoram aniversário nesta data.
          </p>
        </div>
        <ul class="birthday-list" id="birthday-list" aria-live="polite"></ul>
        <p class="empty-message" id="birthday-empty">
          Nenhum aniversariante encontrado para hoje.
        </p>
      </section>

      <section id="status" class="status"></section>
    </main>

    <div
      class="parent-choice"
      id="parent-choice"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
      hidden
    >
      <div class="parent-choice-content" role="document">
        <button
          type="button"
          class="parent-choice-close"
          id="parent-choice-close"
          aria-label="Fechar"
        >
          ×
        </button>
        <h2 id="parent-choice-title">Selecione o responsável</h2>
        <p id="parent-choice-question">Pai ou mãe?</p>
        <div class="parent-choice-actions">
          <button type="button" id="parent-choice-father">Pai</button>
          <button type="button" id="parent-choice-mother">Mãe</button>
          <button type="button" id="parent-choice-cancel" class="secondary">
            Cancelar
          </button>
        </div>
      </div>
    </div>

    <div
      class="access-modal"
      id="access-modal"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
    >
      <div class="access-modal-content">
        <h2 id="access-title">Selecione a seguir sua função:</h2>
        <p id="access-description">Escolha uma opção para continuar:</p>
        <div class="access-step" id="access-step-select">
          <div class="access-options" id="access-options">
            <button type="button" data-access-role="responsavel">
              Irmão Responsável
            </button>
            <button type="button" data-access-role="capitao">
              Capitães de Tropa
            </button>
            <button type="button" data-access-role="servicos">
              Serviços
            </button>
            <button type="button" data-access-role="careNetwork">
              Rede de Cuidado
            </button>
          </div>
        </div>
        <div class="access-step" id="access-step-auth" hidden>
          <form class="access-form" id="access-form" hidden>
            <p class="access-selected-role" id="access-selected-text" hidden>
              Função selecionada: <span id="selected-role-label"></span>
            </p>
            <label for="access-password" id="access-password-label"
              >Digite a senha</label
            >
            <input
              type="password"
              id="access-password"
              name="access-password"
              autocomplete="off"
              required
            />
            <p class="access-error" id="access-error" role="alert"></p>
            <div class="access-actions">
              <button type="button" id="access-back">Voltar</button>
              <button type="submit" id="access-confirm">Confirmar</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="modal" id="details-modal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="modal-content">
        <button class="close-button" id="close-modal" aria-label="Fechar">
          &times;
        </button>
        <h2 id="modal-name">Detalhes</h2>
        <dl id="modal-details"></dl>
        <div class="service-controls" id="service-controls" hidden>
          <div class="service-tags-wrapper">
            <h3 id="service-tags-label">Serviços desempenhados</h3>
            <div
              class="service-tags"
              id="service-tags"
              aria-live="polite"
              aria-labelledby="service-tags-label"
            ></div>
          </div>
          <fieldset class="service-checklist" id="service-checklist" disabled>
            <legend id="service-select-label">Serviços disponíveis</legend>
            <div class="service-checklist-options" id="service-checklist-options"></div>
          </fieldset>
          <p class="service-feedback" id="service-feedback"></p>
        </div>
      </div>
    </div>

    <template id="detail-row-template">
      <div class="detail-row">
        <dt></dt>
        <dd></dd>
      </div>
    </template>

    <button
      type="button"
      class="assistant-toggle"
      id="assistant-toggle"
      aria-haspopup="dialog"
      aria-expanded="false"
      aria-controls="assistant-panel"
    >
      <img
        src="https://simp6.selti-delivery.ru/images3/3d-friendly-cute-robot-assistente-virtual-inteligente-bot-chatbot-mascote-ai-inteligencia-artificial_95505-3959f41aca59707a80b.jpg"
        alt="Abrir assistente virtual"
      />
    </button>
    <div
      class="assistant-panel"
      id="assistant-panel"
      role="dialog"
      aria-modal="false"
      tabindex="-1"
      hidden
    >
      <div class="assistant-header">
        <div>
          <h2 id="assistant-title">JP assistant</h2>
          <p id="assistant-subtitle">Posso ajudar com dúvidas sobre a dashboard.</p>
        </div>
        <button
          type="button"
          class="assistant-close"
          id="assistant-close"
          aria-label="Fechar assistente"
        >
          &times;
        </button>
      </div>
      <div class="assistant-body">
        <div
          class="assistant-conversation"
          id="assistant-conversation"
          aria-live="polite"
        ></div>
        <div class="assistant-questions" id="assistant-questions"></div>
        <form class="assistant-form" id="assistant-form" hidden>
          <label class="sr-only" for="assistant-input" id="assistant-input-label"
            >Descreva sua dúvida</label
          >
          <div class="assistant-input-group">
            <input
              type="text"
              id="assistant-input"
              name="assistant-input"
              placeholder="Digite sua dúvida"
              autocomplete="off"
            />
            <button type="submit" id="assistant-submit">Enviar</button>
          </div>
        </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js" type="module"></script>
  </body>
</html>
